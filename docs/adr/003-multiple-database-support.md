# ADR 003: 複数データベース対応

## ステータス

承認済み

## 背景

Notion Metrics Recorderは複数のNotionデータベースのメトリクスを記録する必要がありました。初期実装では2つの固定データベースのみをサポートしていましたが、以下の要件が発生しました：
1. 最大5つのデータベースをサポート
2. データベースIDを任意設定に変更
3. 未定義のデータベースを適切にスキップ
4. Google Spreadsheetで未定義データベースの値を空欄として記録

## 決定

以下の方針を採用します：
1. 環境変数を通じて最大5つのNotionデータベースをサポート
2. 最初の2つを除き、すべてのデータベースIDを任意設定に
3. 未定義のデータベースはエラーを発生させずにスキップ
4. Google Spreadsheetでは未定義データベースの値を空欄として記録
5. 既存のエラーハンドリングとログ記録の仕組みを維持

## 影響

### メリット
- より柔軟なデータベース設定が可能に
- 未定義データベースの適切な処理
- 未定義データベースの値を空欄として記録し、スプレッドシートの可読性を向上
- 既存の設定との後方互換性を維持

### デメリット
- 設定管理が若干複雑化
- 複数のデータベースIDに関するドキュメント管理が必要
- 必須と任意のデータベースの区別が分かりにくくなる可能性

### 中立
- パフォーマンスへの影響なし
- コア機能の変更なし
- API連携の変更なし 